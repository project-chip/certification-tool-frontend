<!--
 *
 * Copyright (c) 2023 Project CHIP Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<div *ngFor="let session of (sessions$ | async)" class="audio-session-container">
  <video autoplay playsinline [streamSrc]="session.remoteStream$" width="640" height="480"></video>
  
  <div class="audio-container">
    <ng-container *ngIf="{ remote: session.remoteAudioLevel$ | async, local: session.localAudioLevel$ | async } as levels">
      <div class="audio-level-item">
        <div class="audio-label">Speaker</div>
        <i class="pi pi-volume-up"></i>
        <div class="audio-level-bar-container">
          <div class="audio-level-bar-background"></div>
          <div 
            class="audio-level-bar" 
            [style.width]="getAudioLevelWidth(levels.remote || 0)"
            [style.backgroundColor]="getAudioLevelColor(levels.remote || 0)"
          ></div>
        </div>
        <div class="audio-level-value">{{ levels.remote || 0 | number:'1.0-0' }}%</div>
      </div>
      
      <div class="audio-level-item">
        <div class="audio-label">Mic</div>
        <i class="pi pi-microphone"></i>
        <div class="audio-level-bar-container">
          <div class="audio-level-bar-background"></div>
          <div 
            class="audio-level-bar" 
            [style.width]="getAudioLevelWidth(levels.local || 0)"
            [style.backgroundColor]="getAudioLevelColor(levels.local || 0)"
          ></div>
        </div>
        <div class="audio-level-value">{{ levels.local || 0 | number:'1.0-0' }}%</div>
      </div>
    </ng-container>
  </div>
  
  <div class="state">
    Peer Connection State: {{ session.connectionState$ | async }}
  </div>
</div>
